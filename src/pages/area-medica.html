<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/public/images/icons/arpa_icon.png" type="image/x-icon">
    <link rel="stylesheet" href="/public/style.css" />
    <link rel="stylesheet" href="/public/styleAreaMed.css" />
    
    <title>Área Médica</title>
</head>

<body>
    <%- include('partials/header.html') %>

   
        <div class="titulo">
            <h2>Área médica</h2>
        </div>
        
        <form id="formulario-areamed" class="formulario-areamed">
            
                <div class="form-esquerda">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" placeholder="CPF do paciente" class="input-form" oninput="ValidarCPF()"/>
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                  </div>
                <div class="form-esquerda">
                    <label for="CNPJ"> CNPJ </label>
                    <input type="text" id="cnpj" placeholder="CNPJ do paciente" class="input-form" oninput="cnpjvalidar()"/>
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>

                <div class="form-esquerda">
                    <label for="data">Data</label>
                    <input type="date" id="data" placeholder="Data da consulta" />
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>
                <div class="form-esquerda">
                    <label for="diagnostico">Diagnóstico</label>
                    <input type="text" id="diagnostico" placeholder="Diagnóstico da consulta" />
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>
            
            
                <div class="form-direita">
                    <label for="medicamento">Medicamento</label>
                    <input type="text" id="medicamento" placeholder="Medicamento receitado" />
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>
                <div class="form-direita">
                    <label for="exame">Exame</label>
                    <input type="text" id="exame" placeholder="Exame pedido" />
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>
                <div class="form-direita">
                    <label for="observacao">Observação</label>
                    <input type="text" id="observacao" placeholder="Observação sobre a consulta" />
                    <i class="fas fa-exclamation-circle"></i>
                    <i class="fas fa-check-circle"></i>
                    <small>mesagem de erro</small>
                </div>
                <button type="submit" id="butao">Enviar</button>
            
        </form>    
    <%- include('partials/footer.html') %>
    <script>
        const form = document.getElementById("login-form");
        const input = document.querySelectorAll(".input-form");      
        function setError(index) {
            input[index].style.border = "4px solid #e63636";
            
        }

        function removeError(index) {
            input[index].style.border = "";
            
        }

        function ValidarCPF() {
        var cpf = input[0].value;
        exp = /\.|\-/g;
        cpf = cpf.toString().replace(exp, "");
        var digitoDigitado = eval(cpf.charAt(9) + cpf.charAt(10));
        var soma1 = 0,
          soma2 = 0;
        var vlr = 11;

        for (i = 0; i < 9; i++) {
          soma1 += eval(cpf.charAt(i) * (vlr - 1));
          soma2 += eval(cpf.charAt(i) * vlr);
          vlr--;
        }
        soma1 = (soma1 * 10) % 11 == 10 ? 0 : (soma1 * 10) % 11;
        soma2 = ((soma2 + 2 * soma1) * 10) % 11;

        var digitoGerado = soma1 * 10 + soma2;
        if (digitoGerado != digitoDigitado) {
          setError(0);
        } else {
          removeError(0);
        }
      }

      function cnpjvalidar(){
        var cnpj = input[1].value;
        var valida = new Array(6,5,4,3,2,9,8,7,6,5,4,3,2);
        var dig1= new Number;
        var dig2= new Number;

        exp = /\.|\-|\//g
        cnpj = cnpj.toString().replace( exp, "" ); 
        var digito = new Number(eval(cnpj.charAt(12)+cnpj.charAt(13)));

        for(i = 0; i<valida.length; i++){
                dig1 += (i>0? (cnpj.charAt(i-1)*valida[i]):0);  
                dig2 += cnpj.charAt(i)*valida[i];       
        }
        dig1 = (((dig1%11)<2)? 0:(11-(dig1%11)));
        dig2 = (((dig2%11)<2)? 0:(11-(dig2%11)));

        if(((dig1*10)+dig2) != digito){
            setError(1);
        } else {
          removeError(1);
        }
      }
    </script>
</body>

</html>